#!/bin/sh

echo "π” [1] μ¤ν…μ΄μ§•λ TypeScript νμΌ νƒ€μ… κ²€μ‚¬ μ‹μ‘"

# 1. μ¤ν…μ΄μ§•λ νμΌ λ©λ΅μ—μ„ .ts/.tsxλ§ ν•„ν„°λ§
FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(ts|tsx)$' || true)


echo "π” [2] ν•„ν„°λ§λ νμΌ λ©λ΅:"
echo "$FILES"

# 2. κ²€μ‚¬ λ€μƒμ΄ μ—†μΌλ©΄ μ»¤λ°‹ μ§„ν–‰
if [ -z "$FILES" ]; then
  echo "β… [3] κ²€μ‚¬ν•  TypeScript νμΌ μ—†μ. μ»¤λ°‹ κ³„μ† μ§„ν–‰"
  exit 0
fi

echo "π§ [4] κ²€μ‚¬ λ€μƒ μ΅΄μ¬: $FILES"


STATUS=$?
if [ $STATUS -ne 0 ]; then
  echo "β νƒ€μ… μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤. μ»¤λ°‹μ΄ μ¤‘λ‹¨λ©λ‹λ‹¤."
  exit 1
fi

echo "β… [5] λ¨λ“  νμΌ νƒ€μ… κ²€μ‚¬ ν†µκ³Ό. μ»¤λ°‹ μ§„ν–‰"
exit 0
